<html>
<head><meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />

<title>ch12lev1sec4.html</title>
<link rel="stylesheet" href="../../files/helpindex.css" type=
"text/css">
<link rel="stylesheet" href="../../default.css" type="text/css">

<script type="text/JavaScript" src="../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "final/ch12lev1sec4.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../index.html?page=sources%2Ffinal%2Fch12lev1sec4.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../index.html?page=sources%2Ffinal%2Fch12lev1sec4.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td align="right">
<div style="MARGIN-LEFT: 0.15in;"><a href=
"ch12lev1sec3.html"><img src="images/prev.gif" width="20" height=
"20" border="0" align="absmiddle" alt="Previous Page"></a> <a href=
"ch12lev1sec5.html"><img src="images/next.gif" width="20" height=
"20" border="0" align="absmiddle" alt="Next Page"></a></div>
</td>
</tr>
</table>

<div style="">
<div><a name="ch12lev1sec4"></a>
<h3 class="docSection1Title" id="-100000">Embedding Resources</h3>

<p class="docText"><a name="So far"></a>So far in this chapter, we
have talked about accessing data in external devices, but with Qt
it is also possible to embed binary data or text inside the
application's executable. This is achieved using Qt's resource
system. In other chapters, we used resource files to embed images
in the executable, but it is possible to embed any kind of file.
Embedded files can be read using <tt>QFile</tt><a name=
"normal files"></a> just like normal files in the file system.</p>

<p class="docText"><a name="are converted"></a>Resources are
converted into C++ code by <tt>rcc</tt>, Qt's resource compiler. We
can tell <tt>qmake</tt> to include special rules to run
<tt>rcc</tt> by adding this line to the <tt>.pro</tt> file:</p>

<div class="docText">
<pre>
RESOURCES = myresourcefile.qrc
</pre>
</div>
<br>

<p class="docText"><a name="iddle1015"></a><a name=
"iddle1240"></a><a name="iddle1555"></a><a name=
"iddle1662"></a><a name="iddle1856"></a><a name=
"iddle1858"></a><a name="iddle2598"></a><a name=
"iddle2695"></a><a name="iddle3155"></a><a name=
"iddle3158"></a><a name="iddle3278"></a><a name=
"iddle3315"></a><a name="iddle3485"></a><a name=
"iddle4049"></a><a name="iddle4499"></a><a name=
"iddle4508"></a><a name="iddle5617"></a><a name=
"iddle5658"></a><a name="iddle6125"></a><a name=
"iddle6914"></a><a name="iddle6994"></a><a name=
"iddle7877"></a><a name="iddle8267"></a><a name=
"iddle8271"></a><a name="iddle8281"></a><a name="iddle8706"></a>The
<tt>myresourcefile.qrc</tt><a name="to embed"></a> file is an XML
file that lists the files to embed in the executable.</p>

<p class="docText"><a name="an application"></a>Let's imagine that
we are writing an application that keeps contact details. For the
convenience of our users, we want to embed the international
dialing codes in the executable. If the file is in the
<tt>datafiles</tt><a name="like this"></a> directory in the
application's build directory, the resource file might look like
this:</p>

<div class="docText">
<pre>
&lt;RCC&gt;
&lt;qresource&gt;
    &lt;file&gt;datafiles/phone-codes.dat&lt;/file&gt;
&lt;/qresource&gt;
&lt;/RCC&gt;
</pre>
</div>
<br>

<p class="docText">From the application, resources are identified
by the <tt>:/</tt><a name="has the"></a> path prefix. In this
example, the dialing codes file has the path
<tt>:/datafiles/phone-codes.dat</tt><a name="other file"></a> and
can be read just like any other file using <tt>QFile</tt>.</p>

<p class="docText"><a name="in the"></a>Embedding data in the
executable has the advantage that it cannot get lost and makes it
possible to create truly stand-alone executables (if static linking
is also used). Two disadvantages are that if the embedded data
needs changing the whole executable must be replaced, and the size
of the executable will be larger because it must accommodate the
embedded data.</p>

<p class="docText"><a name="this example"></a>Qt's resource system
provides more features than we presented in this example, including
support for file name aliases and for localization. These
facilities are documented at <a class="docLink" target="_blank"
href=
"http://doc.trolltech.com/4.3/resources.html">http://doc.trolltech.com/4.3/resources.html</a>.</p>
</div>
</div>

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td align="right">
<div style="MARGIN-LEFT: 0.15in;"><a href=
"ch12lev1sec3.html"><img src="images/prev.gif" width="20" height=
"20" border="0" align="absmiddle" alt="Previous Page"></a> <a href=
"ch12lev1sec5.html"><img src="images/next.gif" width="20" height=
"20" border="0" align="absmiddle" alt="Next Page"></a></div>
</td>
</tr>
</table>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("sources/" + chmtop.c2wtopf.pageid);
}
</script>

<!-- CHM2WEB -->
<!-- DO NOT DELETE OR MODIFY THIS CODE WITHOUT 
     WRITTEN PERMISSION OF A!K RESEARCH LABS -->
<table width="100%" cellspacing="0" cellpadding="0" 
style="margin-top: 0pt; border-collapse: collapse;"> 
<tr> <td align="right" style="background-color:white; border-top: 1px solid gray;"> 
<a href="http://chm2web.aklabs.com" target="_blank" style="font-family: sans-serif;  font-size: 11px; text-decoration: none;"><font color="gray">Converted from CHM to HTML with <b>chm2web Pro 2.85 (unicode)</b></font></a>
</td></tr></table> 
<!-- /CHM2WEB -->

</body>
</html>
