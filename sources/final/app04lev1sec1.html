<html>
<head><meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />

<title>app04lev1sec1.html</title>
<link rel="stylesheet" href="../../files/helpindex.css" type=
"text/css">
<link rel="stylesheet" href="../../default.css" type="text/css">

<script type="text/JavaScript" src="../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "final/app04lev1sec1.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../index.html?page=sources%2Ffinal%2Fapp04lev1sec1.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../index.html?page=sources%2Ffinal%2Fapp04lev1sec1.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td align="right">
<div style="MARGIN-LEFT: 0.15in;"><a href="app04.html"><img src=
"images/prev.gif" width="20" height="20" border="0" align=
"absmiddle" alt="Previous Page"></a> <a href=
"app04lev1sec2.html"><img src="images/next.gif" width="20" height=
"20" border="0" align="absmiddle" alt="Next Page"></a></div>
</td>
</tr>
</table>

<div style="">
<div><a name="app04"></a>
<h2 id="title-ID0E2TPM" class="docAppendixTitle">D. Introduction to
C++ for Java and C# Programmers</h2>

<ul>
<li>
<p class="docList"><a name="iddle1454"></a><a name=
"iddle1461"></a><a name="iddle3387"></a><a name=
"iddle7797"></a><span class="docEmphasis"><a class="docLink" href=
"app04lev1sec1.html#app04lev1sec1">Getting Started with
C++</a></span>
</p>
</li>

<li>
<p class="docList"><span class="docEmphasis"><a class="docLink"
href="app04lev1sec2.html#app04lev1sec2">Main Language
Differences</a></span>
</p>
</li>

<li>
<p class="docList"><span class="docEmphasis"><a class="docLink"
href="app04lev1sec3.html#app04lev1sec3">The Standard C++
Library</a></span>
</p>
</li>
</ul>

<p class="docText"><a name="This appendix"></a>This appendix
provides a short introduction to C++ for developers who already
know Java or C#. It assumes that you are familiar with
object-oriented concepts such as inheritance and polymorphism and
that you want to learn C++. To avoid making this book an unwieldy
1500 page doorstop by including a complete C++ primer, this
appendix confines itself to essentials. It presents the basic
knowledge and techniques necessary to understand the programs
presented in the rest of the book, with enough information to start
developing cross-platform C++ GUI applications using Qt.</p>

<p class="docText"><a name="time of"></a>At the time of this
writing, C++ is the only realistic option for developing
cross-platform, high-performance, object-oriented GUI applications.
Its detractors usually point out that Java or C#, which dropped C
compatibility, is nicer to use; in fact, Bjarne Stroustrup, the
inventor of C++, noted in <span class="docEmphasis"><a name=
"Design and"></a>The Design and Evolution of C++</span><a name=
"struggling to"></a> (Addison-Wesley, 1994) that "within C++, there
is a much smaller and cleaner language struggling to get out".</p>

<p class="docText"><a name="usually stick"></a>Fortunately, when we
program with Qt, we usually stick to a subset of C++ that is very
close to the utopian language envisioned by Stroustrup, leaving us
free to concentrate on the problem at hand. Furthermore, Qt extends
C++ in several respects, through its innovative "signals and slots"
mechanism, its Unicode support, and its <tt>foreach</tt>
keyword.</p>

<p class="docText"><a name="how to"></a>In the first section of
this appendix, we will see how to combine C++ source files to
obtain an executable program. This will lead us to explore core C++
concepts such as compilation units, header files, object files, and
librariesâ€”and to get familiar with the C++ preprocessor, compiler,
and linker.</p>

<p class="docText"><a name="important language"></a>Then we will
turn to the most important language differences between C++, Java,
and C#: how to define classes, how to use pointers and references,
how to overload operators, how to use the preprocessor, and so on.
Although the C++ syntax is superficially similar to that of Java
and C#, the underlying concepts differ in subtle ways. At the same
time, as an inspirational source for Java and <a name=
"iddle1718"></a><a name="iddle1890"></a><a name=
"iddle2922"></a><a name="iddle3570"></a><a name=
"iddle3658"></a><a name="iddle4083"></a><a name=
"including similar"></a>C#, the C++ language has a lot in common
with these two languages, including similar data types, the same
arithmetic operators, and the same basic control flow
statements.</p>

<p class="docText"><a name="is devoted"></a>The last section is
devoted to the Standard C++ library, which provides ready-made
functionality that can be used in any C++ program. The library is
the result of more than thirty years of evolution, and as such it
provides a wide range of approaches including procedural,
object-oriented, and functional programming styles, and both macros
and templates. Compared with the libraries provided with Java and
C#, the Standard C++ library is quite narrow in scope; for example,
it has no support for GUI programming, multithreading, databases,
internationalization, networking, XML, or Unicode. To develop in
these areas, C++ programmers are expected to use various (often
platform-specific) third-party libraries.</p>

<p class="docText"><a name="where Qt"></a>This is where Qt saves
the day. Qt began as a cross-platform GUI toolkit (a set of classes
that makes it possible to write portable graphical user interface
applications) but rapidly evolved into a full-blown application
development framework that partly extends and partly replaces the
Standard C++ library. Although this book uses Qt, it is useful to
know what the Standard C++ library has to offer, since you may have
to work with code that uses it.</p>
<a name="app04lev1sec1"></a>
<h3 class="docSection1Title" id="-100000">Getting Started with
C++</h3>

<p class="docText"><a name="A C"></a>A C++ program consists of one
or more <span class="docEmphasis">compilation units</span><a name=
"unit is"></a>. Each compilation unit is a separate source code
file, typically with a <tt>.cpp</tt><a name=
"common extensions"></a> extension (other common extensions are
<tt>.cc</tt> and <tt>.cxx</tt><a name="the compiler"></a>) that the
compiler processes in one run. For each compilation unit, the
compiler generates an <span class="docEmphasis">object file</span>,
with the extension <tt>.obj</tt> (on Windows) or
<tt>.o</tt><a name="object file"></a> (on Unix and Mac OS X). The
object file is a binary file that contains machine code for the
architecture on which the program will run.</p>

<p class="docText">Once all the <tt>.cpp</tt><a name=
"together to"></a> files have been compiled, we can combine the
object files together to create an executable using a special
program called the <span class="docEmphasis">linker</span><a name=
"resolves the"></a>. The linker concatenates the object files and
resolves the memory addresses of functions and other symbols
referenced in the compilation units.</p>

<p class="docText">When building a program, exactly one compilation
unit must contain a <tt>main()</tt><a name="any class"></a>
function that serves as the program's entry point. This function
doesn't belong to any class; it is a <span class=
"docEmphasis">global function</span><a name=
"shown schematically"></a>. The process is shown schematically in
<a class="docLink" href="#app04fig01">Figure D.1</a>.</p>
<a name="app04fig01"></a>
<center>
<h5 class="docFigureTitle"><a name="compilation process"></a>Figure
D.1. The C++ compilation process (on Windows)</h5>

<p class="docText"><img border="0" id="" width="324" height="114"
src=
"images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83aXBpcGhncDEvZzBhc2NpX2QuZl9m.jpg"
alt="">
</p>
</center>
<br>

<p class="docText"><a name="Unlike Java"></a>Unlike Java, where
each source file must contain exactly one class, C++ lets us
organize the compilation units as we want. We can implement several
classes in the same <tt>.cpp</tt><a name="the implementation"></a>
file, or spread the implementation of a class across several
<tt>.cpp</tt><a name="we can"></a> files, and we can give the
source files any names we like. When we make a change in one
particular <tt>.cpp</tt><a name="relink the"></a> file, we need to
recompile only that file and then relink the application to create
a new executable.</p>

<p class="docText"><a name="iddle1209"></a><a name=
"iddle1519"></a><a name="iddle1699"></a><a name=
"iddle1889"></a><a name="iddle3196"></a><a name=
"iddle3656"></a><a name="iddle7677"></a><a name=
"iddle7747"></a><a name="iddle7752"></a><a name=
"iddle7763"></a><a name="iddle7798"></a><a name=
"the source"></a>Before we go further, let's quickly review the
source code of a trivial C++ program that computes the square of an
integer. The program consists of two compilation units:
<tt>main.cpp</tt> and <tt>square.cpp</tt>.</p>

<p class="docText">Here's <tt>square.cpp</tt>:</p>

<div class="docText">
<pre>
<span class="docEmphRomanAlt">1</span> double square(double n)
<span class="docEmphRomanAlt">2</span> {
<span class="docEmphRomanAlt">3</span>     return n * n;
<span class="docEmphRomanAlt">4</span> }
</pre>
</div>
<br>

<p class="docText">This file simply contains a global function
called <tt>square()</tt> that returns the square of its
parameter.</p>

<p class="docText">Here's <tt>main.cpp</tt>:</p>

<div class="docText">
<pre>
 <span class="docEmphRomanAlt">1</span> #include &lt;cstdlib&gt;
 <span class="docEmphRomanAlt">2</span> #include &lt;iostream&gt;

 <span class="docEmphRomanAlt">3</span> double square(double);

 <span class=
"docEmphRomanAlt">4</span> int main(int argc, char *argv[])
 <span class="docEmphRomanAlt">5</span> {
 <span class="docEmphRomanAlt">6</span>     if (argc != 2) {
 <span class=
"docEmphRomanAlt">7</span>         std::cerr &lt;&lt; "Usage: square &lt;number&gt;" &lt;&lt; std::endl;
 <span class="docEmphRomanAlt">8</span>         return 1;
 <span class="docEmphRomanAlt">9</span>     }

<span class=
"docEmphRomanAlt">10</span>     double n = std::strtod(argv[1], 0);
<span class=
"docEmphRomanAlt">11</span>     std::cout &lt;&lt; "The square of " &lt;&lt; argv[1] &lt;&lt; " is "
<span class=
"docEmphRomanAlt">12</span>               &lt;&lt; square(n) &lt;&lt; std::endl;
<span class="docEmphRomanAlt">13</span>     return 0;
<span class="docEmphRomanAlt">14</span> }
</pre>
</div>
<br>

<p class="docText">The <tt>main.cpp</tt> source file contains the
<tt>main()</tt> function's definition. In C++, this function takes
an <tt>int</tt> and a <tt>char *</tt><a name="as"></a> array (an
array of character strings) as parameters. The program's name is
available as <tt>argv[0]</tt> and the command-line arguments as
<tt>argv[1]</tt>, <tt>argv[2]</tt>, ..., <tt>argv[argc - 1]</tt>.
The parameter names <tt>argc</tt> ("argument count") and
<tt>argv</tt><a name="can define"></a> ("argument values") are
conventional. If the program doesn't access the command-line
arguments, we can define <tt>main()</tt> with no parameters.</p>

<p class="docText"><a name="iddle1017"></a><a name=
"iddle1028"></a><a name="iddle1407"></a><a name=
"iddle1456"></a><a name="iddle1720"></a><a name=
"iddle1724"></a><a name="iddle2409"></a><a name=
"iddle2876"></a><a name="iddle3003"></a><a name=
"iddle3571"></a><a name="iddle3979"></a><a name=
"iddle4553"></a><a name="iddle6998"></a><a name=
"iddle7693"></a><a name="iddle7741"></a><a name="iddle7753"></a>The
<tt>main()</tt> function uses <tt>strtod()</tt> ("string to
<tt>double</tt>"), <tt>cout</tt> (C++'s standard output stream),
and <tt>cerr</tt><a name="to a"></a> (C++'s standard error stream)
from the Standard C++ library to convert the command-line argument
to a <tt>double</tt><a name="text to"></a> and to print text to the
console. Strings, numbers, and end-of-line markers
(<tt>endl</tt><a name="using the"></a>) are output using the
<tt>&lt;&lt;</tt><a name="which is"></a> operator, which is also
used for bit-shifting. To access this standard functionality, we
need the <tt>#include</tt><a name="lines"></a> directives on lines
1 and 2.</p>

<p class="docText"><a name="the functions"></a>All the functions
and most other items in the Standard C++ library are in the
<tt>std</tt><a name="is to"></a> namespace. One way to access an
item in a namespace is to prefix its name with the namespace's name
using the <tt>::</tt> operator. In C++, the <tt>::</tt><a name=
"a complex"></a> operator separates the components of a complex
name. Namespaces make large multi-person projects easier because
they help avoid name conflicts. We cover them later in this
appendix.</p>

<p class="docText">The declaration on line 3 is a <span class=
"docEmphasis">function prototype</span><a name="the given"></a>. It
tells the compiler that a function exists with the given parameters
and return value. The actual function can be located in the same
compilation unit or in another compilation unit. Without the
function prototype, the compiler wouldn't let us call the function
on line 12. Parameter names in function prototypes are
optional.</p>

<p class="docText"><a name="from platform"></a>The procedure to
compile the program varies from platform to platform. For example,
to compile on Solaris with the Sun C++ compiler, we would type the
following commands:</p>

<div class="docText">
<pre>
CC -c main.cpp
CC -c square.cpp
CC main.o square.o -o square
</pre>
</div>
<br>

<p class="docText">The first two lines invoke the compiler to
generate <tt>.o</tt> files for the <tt>.cpp</tt><a name=
"called"></a> files. The third line invokes the linker and
generates an executable called <tt>square</tt><a name=
"run as"></a>, which we can run as follows:</p>

<div class="docText">
<pre>
./square 64
</pre>
</div>
<br>

<p class="docText"><a name="of the"></a>This run of the program
outputs the following message to the console:</p>

<div class="docText">
<pre>
The square of 64 is 4096
</pre>
</div>
<br>

<p class="docText"><a name="To compile"></a>To compile the program,
you probably want to get help from your local C++ guru. Failing
this, you can still read the rest of this appendix without
compiling anything and follow the instructions in <a class=
"docLink" href="ch01.html#ch01">Chapter 1</a><a name=
"your first"></a> to compile your first C++/Qt application. Qt
provides tools that make it easy to build applications on all
platforms.</p>

<p class="docText"><a name="to our"></a>Back to our program: In a
real-world application, we would normally put the
<tt>square()</tt><a name="file in"></a> function prototype in a
separate file and include that file in all the compilation units
where we need to call the function. Such a file is called a
<span class="docEmphasis">header file</span> and usually has a
<tt>.h</tt> extension (<tt>.hh</tt>, <tt>.hpp</tt>, and
<tt>.hxx</tt><a name="our example"></a> are also common). If we
redo our example using the header file approach, we would create a
file called <tt>square.h</tt> with the following contents:</p>

<div class="docText">
<pre>
<span class="docEmphRomanAlt">1</span> #ifndef SQUARE_H
<span class="docEmphRomanAlt">2</span> #define SQUARE_H

<span class="docEmphRomanAlt">3</span> double square(double);

<span class="docEmphRomanAlt">4</span> #endif
</pre>
</div>
<br>

<p class="docText"><a name="iddle1457"></a><a name=
"iddle1927"></a><a name="iddle2065"></a><a name=
"iddle2407"></a><a name="iddle3145"></a><a name=
"iddle3197"></a><a name="iddle3311"></a><a name=
"iddle4418"></a><a name="iddle7694"></a>The header file is
bracketed by three preprocessor directives (<tt>#ifndef</tt>,
<tt>#define</tt>, and <tt>#endif</tt><a name="only once"></a>).
These directives ensure that the header file is processed only
once, even if the header file is included several times in the same
compilation unit (a situation that can arise when header files
include other header files). By convention, the preprocessor symbol
used to accomplish this is derived from the file name (in our
example, <tt>SQUARE_H</tt><a name="later in"></a>). We will come
back to the preprocessor later in this appendix.</p>

<p class="docText">The new <tt>main.cpp</tt> file looks like
this:</p>

<div class="docText">
<pre>
 <span class="docEmphRomanAlt">1</span> #include &lt;cstdlib&gt;
 <span class="docEmphRomanAlt">2</span> #include &lt;iostream&gt;

 <span class="docEmphRomanAlt">3</span> #include "square.h"

 <span class=
"docEmphRomanAlt">4</span> int main(int argc, char *argv[])
 <span class="docEmphRomanAlt">5</span> {
 <span class="docEmphRomanAlt">6</span>     if (argc != 2) {
 <span class=
"docEmphRomanAlt">7</span>         std::cerr &lt;&lt; "Usage: square &lt;number&gt;" &lt;&lt; std::endl;
 <span class="docEmphRomanAlt">8</span>         return 1;
 <span class="docEmphRomanAlt">9</span>     }

<span class=
"docEmphRomanAlt">10</span>     double n = std::strtod(argv[1], 0);
<span class=
"docEmphRomanAlt">11</span>     std::cout &lt;&lt; "The square of " &lt;&lt; argv[1] &lt;&lt; " is "
<span class=
"docEmphRomanAlt">12</span>               &lt;&lt; square(n) &lt;&lt; std::endl;
<span class="docEmphRomanAlt">13</span>     return 0;
<span class="docEmphRomanAlt">14</span> }
</pre>
</div>
<br>

<p class="docText">The <tt>#include</tt> directive on line 3
expands to the contents of the file <tt>square.h</tt>. Directives
that start with a <tt>#</tt><a name="takes place"></a> are picked
up by the C++ preprocessor before the compilation proper takes
place. In the old days, the preprocessor was a separate program
that the programmer invoked manually before running the compiler.
Modern compilers handle the preprocessor step implicitly.</p>

<p class="docText">The <tt>#include</tt><a name="and"></a>
directives on lines 1 and 2 expand to the contents of the
<tt>cstdlib</tt> and <tt>iostream</tt><a name="are part"></a>
header files, which are part of the Standard C++ library. Standard
header files have no <tt>.h</tt><a name="The angle"></a> suffix.
The angle brackets around the file names indicate that the header
files are located in a standard location on the system, and double
quotes tell the compiler to look in the current directory. Includes
are normally gathered at the top of a <tt>.cpp</tt> file.</p>

<p class="docText">Unlike <tt>.cpp</tt><a name="are not"></a>
files, header files are not compilation units in their own right
and do not produce any object files. Header files may only contain
declarations that enable different compilation units to communicate
with each other. Consequently, it would be inappropriate to put the
<tt>square()</tt><a name="in a"></a> function's implementation in a
header file. If we did so in our example, nothing bad would happen,
because we include <tt>square.h</tt> only once, but if we included
<tt>square.h</tt> from several <tt>.cpp</tt> files, <a name=
"iddle2185"></a><a name="iddle2323"></a><a name=
"iddle2645"></a><a name="iddle3541"></a><a name=
"iddle3566"></a><a name="iddle4428"></a><a name=
"iddle7422"></a><a name="iddle7695"></a><a name=
"iddle7729"></a><a name="iddle7957"></a><a name=
"iddle8318"></a><a name="iddle8322"></a>we would get multiple
implementations of the <tt>square()</tt> function (one per
<tt>.cpp</tt><a name="multiple"></a> file that includes it). The
linker would then complain about multiple (identical) definitions
of <tt>square()</tt><a name="if we"></a> and refuse to generate an
executable. Conversely, if we declare a function but never
implement it, the linker complains about an "unresolved
symbol".</p>

<p class="docText"><a name="of object"></a>So far, we have assumed
that an executable consists exclusively of object files. In
practice, it often also links against libraries that implement
ready-made functionality. There are two main types of
libraries:</p>

<ul>
<li>
<p class="docList"><span class="docEmphasis">Static
libraries</span><a name="they were"></a> are put directly into the
executable, as though they were object files. This ensures that the
library cannot get lost but increases the size of the
executable.</p>
</li>

<li>
<p class="docList"><span class="docEmphasis">Dynamic
libraries</span><a name="on the"></a> (also called shared libraries
or DLLs) are located at a standard location on the user's machine
and are automatically loaded at application startup.</p>
</li>
</ul>

<p class="docText">For the <tt>square</tt><a name=
"the Standard"></a> program, we link against the Standard C++
library, which is implemented as a dynamic library on most
platforms. Qt itself is a collection of libraries that can be built
either as static or as dynamic libraries (the default is
dynamic).</p>
</div>
</div>

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td align="right">
<div style="MARGIN-LEFT: 0.15in;"><a href="app04.html"><img src=
"images/prev.gif" width="20" height="20" border="0" align=
"absmiddle" alt="Previous Page"></a> <a href=
"app04lev1sec2.html"><img src="images/next.gif" width="20" height=
"20" border="0" align="absmiddle" alt="Next Page"></a></div>
</td>
</tr>
</table>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("sources/" + chmtop.c2wtopf.pageid);
}
</script>

<!-- CHM2WEB -->
<!-- DO NOT DELETE OR MODIFY THIS CODE WITHOUT 
     WRITTEN PERMISSION OF A!K RESEARCH LABS -->
<table width="100%" cellspacing="0" cellpadding="0" 
style="margin-top: 0pt; border-collapse: collapse;"> 
<tr> <td align="right" style="background-color:white; border-top: 1px solid gray;"> 
<a href="http://chm2web.aklabs.com" target="_blank" style="font-family: sans-serif;  font-size: 11px; text-decoration: none;"><font color="gray">Converted from CHM to HTML with <b>chm2web Pro 2.85 (unicode)</b></font></a>
</td></tr></table> 
<!-- /CHM2WEB -->

</body>
</html>
